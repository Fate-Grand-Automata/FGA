Adapted from https://github.com/Sh4dowSoul/ComposePreferences